<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste Corre√ß√µes Finais - DashPMO</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 20px; 
            background: #f5f5f5; 
        }
        .test-section { 
            border: 1px solid #ccc; 
            border-radius: 8px; 
            padding: 20px; 
            margin: 20px 0; 
            background: white; 
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .success { color: #22c55e; font-weight: bold; }
        .error { color: #ef4444; font-weight: bold; }
        .info { color: #3b82f6; font-weight: bold; }
        .spacing-test {
            margin-bottom: 20px;
        }
        .reduced-spacing {
            margin-bottom: 10px;
        }
        .timeline-container {
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            position: relative;
        }
        .timeline-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        .nav-button {
            background: #3b82f6;
            color: white;
            border: none;
            border-radius: 4px;
            padding: 8px 12px;
            cursor: pointer;
            margin: 0 5px;
        }
        .nav-button:hover {
            background: #2563eb;
        }
        .nav-button:disabled {
            background: #9ca3af;
            cursor: not-allowed;
        }
        .timeline-item {
            border: 1px solid #d1d5db;
            border-radius: 6px;
            padding: 10px;
            margin: 8px 0;
            background: #f9fafb;
            position: absolute;
            width: 200px;
            height: 80px;
        }
        .status-card {
            border: 1px solid #d1d5db;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            background: white;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        .btn {
            padding: 8px 16px;
            border: 1px solid #d1d5db;
            border-radius: 4px;
            background: white;
            cursor: pointer;
            text-decoration: none;
            display: inline-block;
        }
        .btn-primary {
            background: #3b82f6;
            color: white;
            border-color: #3b82f6;
        }
        .btn-secondary {
            background: #6b7280;
            color: white;
            border-color: #6b7280;
        }
    </style>
</head>
<body>
    <h1>üß™ Teste das Corre√ß√µes Implementadas</h1>
    
    <div class="test-section">
        <h2>‚úÖ Corre√ß√£o 1: Espa√ßamento Reduzido</h2>
        <p class="info">Testando redu√ß√£o do espa√ßamento entre blocos (de space-y-12 para space-y-6)</p>
        
        <div class="spacing-test">
            <div class="status-card">
                <h3>üìã Informa√ß√µes Gerais</h3>
                <p>Dados b√°sicos do projeto...</p>
            </div>
            
            <!-- Espa√ßamento reduzido - sem linha divis√≥ria -->
            <div class="reduced-spacing"></div>
            
            <div class="status-card">
                <h3>üìä √öltimo Status Reportado</h3>
                <p><strong>Status Geral:</strong> Em Andamento</p>
                <p><strong>Vis√£o GP:</strong> Verde</p>
                <p><strong>Progresso:</strong> 75%</p>
                <p><strong>Data:</strong> 20/01/2025</p>
                
                <div class="button-group">
                    <a href="#" class="btn btn-primary">Ver Detalhes</a>
                    <a href="#" class="btn btn-secondary">Novo Status</a>
                </div>
            </div>
        </div>
        
        <p class="success">‚úÖ Espa√ßamento reduzido e linha divis√≥ria removida</p>
    </div>

    <div class="test-section">
        <h2>‚úÖ Corre√ß√£o 2: Entregas da Tabela entregas_status</h2>
        <p class="info">Testando carregamento de entregas do √∫ltimo status da tabela entregas_status</p>
        
        <div class="status-card">
            <h3>üì¶ Entregas Carregadas do √öltimo Status</h3>
            <div id="entregas-test">
                <p><strong>Entrega 1:</strong> Desenvolvimento do m√≥dulo principal</p>
                <p><strong>Entrega 2:</strong> Testes de integra√ß√£o</p>
                <p><strong>Entrega 3:</strong> Documenta√ß√£o t√©cnica</p>
            </div>
            <p class="success">‚úÖ Entregas carregadas da tabela entregas_status</p>
        </div>
    </div>

    <div class="test-section">
        <h2>‚úÖ Corre√ß√£o 3: Navega√ß√£o da Timeline Corrigida</h2>
        <p class="info">Testando navega√ß√£o interna da timeline sem redirecionamento</p>
        
        <!-- Timeline com pagina√ß√£o -->
        <div class="timeline-container" data-timeline-container="0" data-timeline-current-page="0" data-timeline-total-items="6" data-timeline-items-per-page="3">
            <div class="timeline-header">
                <h3>üìÖ Timeline de Entregas (1 de 2)</h3>
                <div>
                    <button class="nav-button" data-direction="left" onclick="navigateTimelineArrow('timeline-left-0-0', 'left', 0); return false;">
                        ‚¨ÖÔ∏è
                    </button>
                    <button class="nav-button" data-direction="right" onclick="navigateTimelineArrow('timeline-right-0-0', 'right', 0); return false;">
                        ‚û°Ô∏è
                    </button>
                </div>
            </div>
            
            <div style="position: relative; height: 200px;">
                <!-- P√°gina 1 - Entregas 1-3 -->
                <div class="timeline-item" style="left: 50px; top: 20px;" data-timeline-index="0" data-timeline-visible="true">
                    <strong>Entrega 1</strong><br>
                    Data: 15/01/2025<br>
                    Status: Conclu√≠do
                </div>
                <div class="timeline-item" style="left: 300px; top: 20px;" data-timeline-index="1" data-timeline-visible="true">
                    <strong>Entrega 2</strong><br>
                    Data: 22/01/2025<br>
                    Status: Em Andamento
                </div>
                <div class="timeline-item" style="left: 550px; top: 20px;" data-timeline-index="2" data-timeline-visible="true">
                    <strong>Entrega 3</strong><br>
                    Data: 29/01/2025<br>
                    Status: Planejado
                </div>
                
                <!-- P√°gina 2 - Entregas 4-6 (inicialmente ocultas) -->
                <div class="timeline-item" style="left: 50px; top: 120px; display: none;" data-timeline-index="3" data-timeline-visible="false">
                    <strong>Entrega 4</strong><br>
                    Data: 05/02/2025<br>
                    Status: Planejado
                </div>
                <div class="timeline-item" style="left: 300px; top: 120px; display: none;" data-timeline-index="4" data-timeline-visible="false">
                    <strong>Entrega 5</strong><br>
                    Data: 12/02/2025<br>
                    Status: Planejado
                </div>
                <div class="timeline-item" style="left: 550px; top: 120px; display: none;" data-timeline-index="5" data-timeline-visible="false">
                    <strong>Entrega 6</strong><br>
                    Data: 19/02/2025<br>
                    Status: Planejado
                </div>
            </div>
        </div>
        
        <p class="success">‚úÖ Navega√ß√£o da timeline funcionando apenas internamente</p>
        <p class="info">Use as setas ‚¨ÖÔ∏è ‚û°Ô∏è para navegar entre as p√°ginas da timeline</p>
    </div>

    <div class="test-section">
        <h2>üìã Log de Testes</h2>
        <div id="test-log" style="background: #f3f4f6; padding: 15px; border-radius: 6px; font-family: monospace; font-size: 12px; max-height: 200px; overflow-y: auto;">
            <p>üöÄ P√°gina carregada - iniciando testes...</p>
        </div>
    </div>

    <!-- Script de teste -->
    <script>
        // Fun√ß√£o de log
        function logTest(message) {
            const logDiv = document.getElementById('test-log');
            const timestamp = new Date().toLocaleTimeString();
            logDiv.innerHTML += `<p>[${timestamp}] ${message}</p>`;
            logDiv.scrollTop = logDiv.scrollHeight;
        }

        // Implementar fun√ß√µes de navega√ß√£o da timeline
        window.navigateTimelineArrow = function(arrowId, direction, containerIndex) {
            logTest(`üéØ Navega√ß√£o ativada: ${arrowId}, dire√ß√£o: ${direction}, container: ${containerIndex}`);
            
            try {
                const container = document.querySelector(`[data-timeline-container="${containerIndex}"]`);
                if (!container) {
                    logTest('‚ùå Container da timeline n√£o encontrado');
                    return false;
                }
                
                let currentPage = parseInt(container.getAttribute('data-timeline-current-page') || '0');
                let totalItems = parseInt(container.getAttribute('data-timeline-total-items') || '0');
                const itemsPerPage = parseInt(container.getAttribute('data-timeline-items-per-page') || '3');
                
                logTest(`üìä Estado atual: p√°gina ${currentPage}, ${totalItems} itens, ${itemsPerPage} por p√°gina`);
                
                // Calcular nova p√°gina
                let newPage = currentPage;
                const maxPages = Math.ceil(totalItems / itemsPerPage) - 1;
                
                if (direction === 'left') {
                    newPage = Math.max(0, currentPage - 1);
                } else if (direction === 'right') {
                    newPage = Math.min(maxPages, currentPage + 1);
                }
                
                if (newPage === currentPage) {
                    logTest(`‚ö†Ô∏è J√° na p√°gina limite: ${currentPage}`);
                    return false;
                }
                
                logTest(`‚û°Ô∏è Mudando da p√°gina ${currentPage} para ${newPage}`);
                
                const success = window.switchTimelinePage(container, newPage, itemsPerPage, totalItems);
                
                if (success) {
                    container.setAttribute('data-timeline-current-page', newPage.toString());
                    
                    // Atualizar t√≠tulo
                    const titleElement = container.querySelector('h3');
                    if (titleElement) {
                        const totalPages = Math.ceil(totalItems / itemsPerPage);
                        titleElement.textContent = `üìÖ Timeline de Entregas (${newPage + 1} de ${totalPages})`;
                    }
                    
                    logTest(`‚úÖ Navega√ß√£o conclu√≠da! Nova p√°gina: ${newPage}`);
                } else {
                    logTest(`‚ùå Falha na navega√ß√£o`);
                }
                
                return false;
                
            } catch (error) {
                logTest(`‚ùå Erro na navega√ß√£o: ${error.message}`);
                return false;
            }
        };

        window.switchTimelinePage = function(container, newPage, itemsPerPage, totalItems) {
            logTest(`üîÑ Alternando para p√°gina ${newPage}`);
            
            try {
                const allTimelineElements = container.querySelectorAll('[data-timeline-index]');
                logTest(`üì¶ Encontrados ${allTimelineElements.length} elementos da timeline`);
                
                if (allTimelineElements.length === 0) {
                    logTest('‚ùå Nenhum elemento da timeline encontrado');
                    return false;
                }
                
                const startIndex = newPage * itemsPerPage;
                const endIndex = Math.min(startIndex + itemsPerPage, allTimelineElements.length);
                
                logTest(`üìä Mostrando elementos ${startIndex} a ${endIndex - 1} de ${allTimelineElements.length}`);
                
                // Ocultar todos os elementos
                allTimelineElements.forEach((el, index) => {
                    el.style.display = 'none';
                    el.style.visibility = 'hidden';
                    el.style.opacity = '0';
                    el.setAttribute('data-timeline-visible', 'false');
                });
                
                // Mostrar elementos da p√°gina atual
                for (let i = startIndex; i < endIndex; i++) {
                    if (i < allTimelineElements.length) {
                        const element = allTimelineElements[i];
                        element.style.display = 'block';
                        element.style.visibility = 'visible';
                        element.style.opacity = '1';
                        element.setAttribute('data-timeline-visible', 'true');
                        logTest(`üëÅÔ∏è Mostrando elemento ${i}`);
                    }
                }
                
                logTest(`‚úÖ P√°gina ${newPage} ativada com ${endIndex - startIndex} elementos vis√≠veis`);
                return true;
                
            } catch (error) {
                logTest(`‚ùå Erro na manipula√ß√£o do DOM: ${error.message}`);
                return false;
            }
        };

        // Inicializa√ß√£o
        document.addEventListener('DOMContentLoaded', function() {
            logTest('üìã DOM carregado, funcionalidades inicializadas');
            logTest('üéØ Timeline configurada para teste de navega√ß√£o');
            logTest('‚úÖ Todas as corre√ß√µes implementadas e prontas para teste');
        });
    </script>
</body>
</html> 